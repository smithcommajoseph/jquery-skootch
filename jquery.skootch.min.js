(function(f){var b="1.0";f.fn.skootch=function(j,i){var k={s:this.selector,c:this.context};return this.each(function(){var l=f(k.s,k.c),p=h(this,j,i),r=p.params||null,o=p.nextAction||null,n=p.nextActionCallback||null;if(o!==null){switch(o){case"retreat":g(l,r,n);break;case"destroy":d(l,this,n);break}}else{if(r!==null){var m=f(r.indigen).attr("id")+"-"+r.wrapperSuffix,q=f(r.indigen).wrap(function(){return'<div id="'+m+'" syle="position: relative;"/>'});var s=function(w){var t=false,v=function(){if(r.invaderClickCallback!==null){r.invaderClickCallback(w)}else{if(f(w.target).attr("href")!==""||typeof f(w.target).attr("href")!==undefined){window.location=f(w.target).attr("href")}else{if(f(w.target).attr("type")==="submit"){var x=f(w.target).closest("form")}}}};l.unbind(r.triggerEvent);for(var u=0;u<f(r.invaderLinks).length;u++){if(w.target===f(r.invaderLinks)[u]){t=true}}if(t===true){l.bind(r.triggerEvent,s);if(r.invaderClickRetreat===true){g(l,r,function(){v()})}else{v()}}else{if(typeof f(r.indigen).data("skootch.state")=="undefined"){f(r.indigen).data({"skootch.state":"Closed",justify:r.justify})}if(f(r.indigen).data("skootch.state")=="Closed"){e(l,r,function(){l.bind(r.triggerEvent,s)})}else{g(l,r,function(){l.bind(r.triggerEvent,s)})}}return false};return f("#"+l.attr("id")+", "+r.invaderLinks).bind(r.triggerEvent,s)}}})};function h(k,q,m){var o={},l={},i={},n="",p=null;if(typeof q=="object"){o=q}if(typeof q=="string"){switch(q){case"destroy":n="destroy";if(m!==undefined&&m.constructor==Function){p=m}break;case"retreat":n="retreat";if(m!==undefined&&m.constructor==Function){p=m}break;default:if(m!==undefined){for(var j in f.fn.skootch.defaults){if(j==q){o[q]=m}}}}}l=f.extend(f.fn.skootch.defaults,o);f(k).data("skootch.params",l);i={nextAction:n,nextActionCallback:p,params:l};return i}function a(p,k){var m=f(k.invader).outerWidth(true),i=f(k.indigen).css(k.justify),s;if(k.smart===true){var j=f(window).width(),n=f(k.indigen).outerWidth(k.indigenUseMargins),q=(m*2)+k.minInvaderMargin+n;if(q<=j){s=0}else{if(j<=n){s=m+k.minInvaderMargin}else{var l=f(k.indigen).offset();s=(m+k.minInvaderMargin)-l.left}}}else{s=m}var o={indigen_advance:{left:"+="+s},indigen_retreat:{left:"-="+i},invader_advance:{left:"+="+m},invader_retreat:{left:"-="+m}},r={indigen_advance:{right:"+="+s},indigen_retreat:{right:"-="+i},invader_advance:{right:"+="+m},invader_retreat:{right:"-="+m}};switch(k.justify){case"left":return o;case"right":return r}}function d(i,j,l){var k=f(j).data("skootch.params");if(!k){return false}f(j).removeData("skootch.params");i.unbind(k.triggerEvent);f(k.indigen).unwrap();f(k.invader+", "+k.indigen).removeAttr("style");if(l!==null){l()}}function e(i,l,j){if(f(l.indigen).data("skootch.state")!="Open"){var k=a(f(l.indigen),l);f(l.indigen).data("skootch.state","Open");f("body").css({"overflow-x":"hidden"});f(l.indigen).css("position","relative").animate(k.indigen_advance,l.advanceSpeed,l.advanceEasing);i.removeClass(l.triggerClosed).addClass(l.triggerOpen);f(l.invader).animate(k.invader_advance,l.advanceSpeed,l.advanceEasing,j)}}function g(i,l,j){if(f(l.indigen).data("skootch.state")=="Open"){var k=a(f(l.indigen),l);f(l.indigen).data("skootch.state","Closed");f(l.indigen).animate(k.indigen_retreat,l.retreatSpeed,l.retreatEasing,function(){f("body").css({"overflow-x":"auto"});f(l.indigen).removeAttr("style")});i.removeClass(l.triggerOpen).addClass(l.triggerClosed);f(l.invader).animate(k.invader_retreat,l.retreatSpeed,l.retreatEasing,j)}}function c(j,k){if(k.invaderClickCallback!==null){k.invaderClickCallback(j)}else{if(f(j.target).attr("href")!==""||typeof f(j.target).attr("href")!==undefined){window.location=f(j.target).attr("href")}else{if(f(j.target).attr("type")==="submit"){var i=f(j.target).closest("form")}}$trigger.bind(k.triggerEvent,clickHandler)}}f.fn.skootch.ver=function(){return b};f.fn.skootch.defaults={advanceEasing:"swing",advanceSpeed:"slow",indigen:"#skootch-indigen",indigenUseMargins:false,invader:"#skootch-invader",invaderClickCallback:null,invaderClickRetreat:true,invaderLinks:"#skootch-invader a, #skootch-invader input[type=submit]",justify:"left",minInvaderMargin:40,retreatEasing:"swing",retreatSpeed:"slow",smart:true,triggerClosed:"skootch-trigger-closed",triggerEvent:"click.skootch",triggerOpen:"skootch-trigger-open",wrapperSuffix:"skootch-wrap"}})(jQuery);