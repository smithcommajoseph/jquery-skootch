(function(d){var f="1.0";d.fn.skootch=function(k,j){var l={s:this.selector,c:this.context};return this.each(function(){var m=d(l.s,l.c),q=a(this,k,j),s=q.params||null,p=q.nextAction||null,o=q.nextActionCallback||null;if(p!==null){switch(p){case"retreat":b(m,s,o);break;case"destroy":h(m,this,o);break}}else{if(s!==null){var n=d(s.indigen).attr("id")+"-"+s.wrapperSuffix,r=d(s.indigen).wrap(function(){return'<div id="'+n+'" syle="position: relative;"/>'});var t=function(x){var u=false,w=function(){if(s.invaderClickCallback!==null){s.invaderClickCallback(x)}else{if(d(x.target).attr("href")!==""||typeof d(x.target).attr("href")!==undefined){window.location=d(x.target).attr("href")}else{if(d(x.target).attr("type")==="submit"){var y=d(x.target).closest("form")}}}};m.unbind(s.triggerEvent);for(var v=0;v<d(s.invaderLinks).length;v++){if(x.target===d(s.invaderLinks)[v]){u=true}}if(u===true){m.bind(s.triggerEvent,t);if(s.invaderClickRetreat===true){b(m,s,function(){w()})}else{w()}}else{if(typeof d(s.indigen).data("skootch.state")=="undefined"){d(s.indigen).data({"skootch.state":"Closed",justify:s.justify})}if(d(s.indigen).data("skootch.state")=="Closed"){g(m,s,function(){m.bind(s.triggerEvent,t)})}else{b(m,s,function(){m.bind(s.triggerEvent,t)})}}return false};return d("#"+m.attr("id")+", "+s.invaderLinks).bind(s.triggerEvent,t)}}})};function a(l,r,n){var p={},m={},j={},o="",q=null;if(typeof r=="object"){p=r}if(typeof r=="string"){switch(r){case"destroy":o="destroy";if(n!==undefined&&n.constructor==Function){q=n}break;case"retreat":o="retreat";if(n!==undefined&&n.constructor==Function){q=n}break;default:if(n!==undefined){for(var k in d.fn.skootch.defaults){if(k==r){p[r]=n}}}}}m=d.extend(d.fn.skootch.defaults,p);d(l).data("skootch.params",m);j={nextAction:o,nextActionCallback:q,params:m};return j}function i(q,l){var n=e(d(l.invader),true),j=d(l.indigen).css(l.justify),t;if(l.smart===true){var k=d(window).width(),o=e(d(l.indigen),l.indigenUseMargins),r=(n*2)+l.minInvaderMargin+o;if(r<=k){t=0}else{if(k<=o){t=n+l.minInvaderMargin}else{var m=d(l.indigen).offset();t=(n+l.minInvaderMargin)-m.left}}}else{t=n}var p={indigen_advance:{left:"+="+t},indigen_retreat:{left:"-="+j},invader_advance:{left:"+="+n},invader_retreat:{left:"-="+n}},s={indigen_advance:{right:"+="+t},indigen_retreat:{right:"-="+j},invader_advance:{right:"+="+n},invader_retreat:{right:"-="+n}};switch(l.justify){case"left":return p;case"right":return s}}function h(j,k,m){var l=d(k).data("skootch.params");if(!l){return false}d(k).removeData("skootch.params");j.unbind(l.triggerEvent);d(l.indigen).unwrap();d(l.invader+", "+l.indigen).removeAttr("style");if(m!==null){m()}}function g(j,m,k){if(d(m.indigen).data("skootch.state")!="Open"){var l=i(d(m.indigen),m);d(m.indigen).data("skootch.state","Open");d("body").css({"overflow-x":"hidden"});d(m.indigen).css("position","relative").animate(l.indigen_advance,m.advanceSpeed,m.advanceEasing);j.removeClass(m.triggerClosed).addClass(m.triggerOpen);d(m.invader).animate(l.invader_advance,m.advanceSpeed,m.advanceEasing,k)}}function b(j,m,k){if(d(m.indigen).data("skootch.state")=="Open"){var l=i(d(m.indigen),m);d(m.indigen).data("skootch.state","Closed");d(m.indigen).animate(l.indigen_retreat,m.retreatSpeed,m.retreatEasing,function(){d("body").css({"overflow-x":"auto"});d(m.indigen).removeAttr("style")});j.removeClass(m.triggerOpen).addClass(m.triggerClosed);d(m.invader).animate(l.invader_retreat,m.retreatSpeed,m.retreatEasing,k)}}function c(k,l){if(l.invaderClickCallback!==null){l.invaderClickCallback(k)}else{if(d(k.target).attr("href")!==""||typeof d(k.target).attr("href")!==undefined){window.location=d(k.target).attr("href")}else{if(d(k.target).attr("type")==="submit"){var j=d(k.target).closest("form")}}$trigger.bind(l.triggerEvent,clickHandler)}}function e(j,k){k=k||false;return parseFloat(j.outerWidth(k))}d.fn.skootch.ver=function(){return f};d.fn.skootch.defaults={advanceEasing:"swing",advanceSpeed:"slow",indigen:"#skootch-indigen",indigenUseMargins:false,invader:"#skootch-invader",invaderClickCallback:null,invaderClickRetreat:true,invaderLinks:"#skootch-invader a, #skootch-invader input[type=submit]",justify:"left",minInvaderMargin:40,retreatEasing:"swing",retreatSpeed:"slow",smart:true,triggerClosed:"skootch-trigger-closed",triggerEvent:"click.skootch",triggerOpen:"skootch-trigger-open",wrapperSuffix:"skootch-wrap"}})(jQuery);