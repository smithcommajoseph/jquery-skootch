/*
 * jQuery Skootch: The JQuery Skootch plugin allows you to easily animate items into the viewport 
 * and will shift (skootch) the already visible DOM items appropriately.
 *
 * http://jquery-skootch.twohard.com/
 *
 * 2011 - Joseph Smith
 *
 * Dependencies:
 * jQuery 1.4+ (jquery.com)
 *
 */
(function(e){var b="1.0";e.fn.skootch=function(i,h){var j={s:this.selector,c:this.context};return this.each(function(){var k=e(j.s,j.c),o=g(this,i,h),q=o.params||null,n=o.nextAction||null,m=o.nextActionCallback||null;if(n!==null){switch(n){case"retreat":f(k,q,m);break;case"destroy":c(k,this,m);break}}else{if(q!==null){var l=e(q.indigen).attr("id")+"-"+q.wrapperSuffix,p=e(q.indigen).wrap(function(){return'<div id="'+l+'" syle="position: relative;"/>'});var r=function(v){var s=false,u=function(){if(q.invaderClickCallback!==null){q.invaderClickCallback(v)}else{if(e(v.target).attr("href")!==""||typeof e(v.target).attr("href")!==undefined){window.location=e(v.target).attr("href")}else{if(e(v.target).attr("type")==="submit"){var w=e(v.target).closest("form")}}}};k.unbind(q.triggerEvent);for(var t=0;t<e(q.invaderLinks).length;t++){if(v.target===e(q.invaderLinks)[t]){s=true}}if(s===true){k.bind(q.triggerEvent,r);if(q.invaderClickRetreat===true){f(k,q,function(){u()})}else{u()}}else{if(typeof e(q.indigen).data("skootch.state")=="undefined"||e(q.indigen).data("skootch.state")===null){e(q.indigen).data({"skootch.state":"Closed",justify:q.justify})}if(e(q.indigen).data("skootch.state")=="Closed"){d(k,q,function(){k.bind(q.triggerEvent,r)})}else{f(k,q,function(){k.bind(q.triggerEvent,r)})}}return false};return e("#"+k.attr("id")+", "+q.invaderLinks).bind(q.triggerEvent,r)}}})};function g(j,p,l){var n={},k={},h={},m="",o=null;if(typeof p=="object"){n=p}if(typeof p=="string"){switch(p){case"destroy":m="destroy";if(l!==undefined&&l.constructor==Function){o=l}break;case"retreat":m="retreat";if(l!==undefined&&l.constructor==Function){o=l}break;default:if(l!==undefined){for(var i in e.fn.skootch.defaults){if(i==p){n[p]=l}}}}}k=e.extend(e.fn.skootch.defaults,n);e(j).data("skootch.params",k);h={nextAction:m,nextActionCallback:o,params:k};return h}function a(o,j){var l=e(j.invader).outerWidth(true),h=e(j.indigen).css(j.justify),r;if(j.smart===true){var i=e(window).width(),m=e(j.indigen).outerWidth(j.indigenUseMargins),p=(l*2)+j.minInvaderMargin+m;if(p<=i){r=0}else{if(i<=m){r=l+j.minInvaderMargin}else{var k=e(j.indigen).offset();r=(l+j.minInvaderMargin)-k.left}}}else{r=l}var n={indigen_advance:{left:"+="+r},indigen_retreat:{left:"-="+h},invader_advance:{left:"+="+l},invader_retreat:{left:"-="+l}},q={indigen_advance:{right:"+="+r},indigen_retreat:{right:"-="+h},invader_advance:{right:"+="+l},invader_retreat:{right:"-="+l}};switch(j.justify){case"left":return n;case"right":return q}}function c(h,i,k){var j=e(i).data("skootch.params");if(!j){return false}e(i).removeData("skootch.params");h.unbind(j.triggerEvent);e(j.indigen).unwrap();e(j.invader+", "+j.indigen).removeAttr("style");if(k!==null){k()}}function d(h,k,i){if(e(k.indigen).data("skootch.state")!="Open"){var j=a(e(k.indigen),k);e(k.indigen).data("skootch.state","Open");e("body").css({"overflow-x":"hidden"});e(k.indigen).css("position","relative").animate(j.indigen_advance,k.advanceSpeed,k.advanceEasing);h.removeClass(k.triggerClosed).addClass(k.triggerOpen);e(k.invader).animate(j.invader_advance,k.advanceSpeed,k.advanceEasing,i)}}function f(h,k,i){if(e(k.indigen).data("skootch.state")=="Open"){var j=a(e(k.indigen),k);e(k.indigen).data("skootch.state","Closed");e(k.indigen).animate(j.indigen_retreat,k.retreatSpeed,k.retreatEasing,function(){e("body").css({"overflow-x":"auto"});e(k.indigen).removeAttr("style")});h.removeClass(k.triggerOpen).addClass(k.triggerClosed);e(k.invader).animate(j.invader_retreat,k.retreatSpeed,k.retreatEasing,i)}}e.fn.skootch.ver=function(){return b};e.fn.skootch.defaults={advanceEasing:"swing",advanceSpeed:"slow",indigen:"#skootch-indigen",indigenUseMargins:false,invader:"#skootch-invader",invaderClickCallback:null,invaderClickRetreat:true,invaderLinks:"#skootch-invader a, #skootch-invader input[type=submit]",justify:"left",minInvaderMargin:40,retreatEasing:"swing",retreatSpeed:"slow",smart:true,triggerClosed:"skootch-trigger-closed",triggerEvent:"click.skootch",triggerOpen:"skootch-trigger-open",wrapperSuffix:"skootch-wrap"}})(jQuery);