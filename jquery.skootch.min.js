/*
 * jQuery Skootch: The JQuery Skootch plugin allows you to easily animate items into the viewport 
 * and will shift (skootch) the already visible DOM items appropriately.
 *
 * http://jquery-skootch.twohard.com/
 *
 * 2011 - Joseph Smith
 *
 * Dependencies:
 * jQuery 1.4+ (jquery.com)
 *
 */
(function(f){var b="1.0",g=function(j,p,l){var n={},k={},h={},m="",o=null;if(typeof p=="object"){n=p}if(typeof p=="string"){switch(p){case"destroy":case"retreat":case"advance":m=p;if(l!==undefined&&l.constructor==Function){o=l}break;default:if(l!==undefined){for(var i in f.fn.skootch.defaults){if(i==p){n[p]=l}}}}}k=f.extend(f.fn.skootch.defaults,n);f(j).data("skootch.params",k);h={nextAction:m,nextActionCallback:o,params:k};return h},a=function(o,j){var l=f(j.invader).outerWidth(true),h=f(j.indigen).css(j.justify),r;if(j.smart===true){var i=f(window).width(),m=f(j.indigen).outerWidth(j.indigenUseMargins),p=(l*2)+j.minInvaderMargin+m;if(p<=i){r=0}else{if(i<=m){r=l+j.minInvaderMargin}else{var k=f(j.indigen).offset();r=(l+j.minInvaderMargin)-k.left}}}else{r=l}var n={indigen_advance:{left:"+="+r},indigen_retreat:{left:"-="+h},invader_advance:{left:"+="+l},invader_retreat:{left:"-="+l}},q={indigen_advance:{right:"+="+r},indigen_retreat:{right:"-="+h},invader_advance:{right:"+="+l},invader_retreat:{right:"-="+l}};switch(j.justify){case"left":return n;case"right":return q}},c=function(h,i,k){var j=f(i).data("skootch.params");if(!j){return false}f(i).removeData("skootch.params");h.unbind(j.triggerEvent);f(j.indigen).unwrap();f(j.invader+", "+j.indigen).removeAttr("style");if(k!==null){k()}},d=function(h,k,i){if(f(k.indigen).data("skootch.state")!="Open"){var j=a(f(k.indigen),k);f(k.indigen).data("skootch.state","Open");f("body").css({"overflow-x":"hidden"});f(k.indigen).css("position","relative").animate(j.indigen_advance,k.advanceSpeed,k.advanceEasing);h.removeClass(k.triggerClosed).addClass(k.triggerOpen);f(k.invader).animate(j.invader_advance,k.advanceSpeed,k.advanceEasing,i)}},e=function(h,k,i){if(f(k.indigen).data("skootch.state")=="Open"){var j=a(f(k.indigen),k);f(k.indigen).data("skootch.state","Closed");f(k.indigen).animate(j.indigen_retreat,k.retreatSpeed,k.retreatEasing,function(){f("body").css({"overflow-x":"auto"});f(k.indigen).removeAttr("style")});h.removeClass(k.triggerOpen).addClass(k.triggerClosed);f(k.invader).animate(j.invader_retreat,k.retreatSpeed,k.retreatEasing,i)}};f.fn.skootch=function(i,h){var j={s:this.selector,c:this.context};return this.each(function(){var k=f(j.s,j.c),o=g(this,i,h),q=o.params||null,n=o.nextAction||null,m=o.nextActionCallback||null;if(n!==null){switch(n){case"advance":d(k,q,m);break;case"retreat":e(k,q,m);break;case"destroy":c(k,this,m);break}}else{var l=f(q.indigen).attr("id")+"-"+q.wrapperSuffix,p=f(q.indigen).wrap(function(){return'<div id="'+l+'" syle="position: relative;"/>'});return f("#"+k.attr("id")+", "+q.invaderLinks).bind(q.triggerEvent,clickHandler=function(u){var r=false,t=function(){if(q.invaderClickCallback!==null){q.invaderClickCallback(u)}else{if(f(u.target).attr("href")!==""||typeof f(u.target).attr("href")!==undefined){window.location=f(u.target).attr("href")}else{if(f(u.target).attr("type")==="submit"){var v=f(u.target).closest("form")}}}};k.unbind(q.triggerEvent);for(var s=0;s<f(q.invaderLinks).length;s++){if(u.target===f(q.invaderLinks)[s]){r=true}}if(r===true){k.bind(q.triggerEvent,clickHandler);if(q.invaderClickRetreat===true){e(k,q,function(){t()})}else{t()}}else{if(typeof f(q.indigen).data("skootch.state")=="undefined"||f(q.indigen).data("skootch.state")===null){f(q.indigen).data({"skootch.state":"Closed",justify:q.justify})}if(f(q.indigen).data("skootch.state")=="Closed"){d(k,q,function(){k.bind(q.triggerEvent,clickHandler)})}else{e(k,q,function(){k.bind(q.triggerEvent,clickHandler)})}}return false})}})};f.fn.skootch.ver=function(){return b};f.fn.skootch.defaults={advanceEasing:"swing",advanceSpeed:"slow",indigen:"#skootch-indigen",indigenUseMargins:false,invader:"#skootch-invader",invaderClickCallback:null,invaderClickRetreat:true,invaderLinks:"#skootch-invader a, #skootch-invader input[type=submit]",justify:"left",minInvaderMargin:40,retreatEasing:"swing",retreatSpeed:"slow",smart:true,triggerClosed:"skootch-trigger-closed",triggerEvent:"click.skootch",triggerOpen:"skootch-trigger-open",wrapperSuffix:"skootch-wrap"}})(jQuery);